# 21. Ограничения программирования с состояниями
ООП как развитию stateful-парадигмы присущи также соответственно все эти ограничения.

## Реальный мир параллелен

Основное ограничение stateful-модели заключается в том, что программы последовательны (императивны). В реальном мире сущности одновременно и имеют внутреннее состояние, и действуют параллельно. Последовательное программирование никак не моделирует параллельное исполнение. Иногда такое ограничение уместно, например, при написании систем, где все события скоординированы (переход из одного глобального состояния в другое происходит контролируемым образом). В других случаях, например, при взаимодействии с реальным миром (живыми пользователями), это ограничение становится серьёзным препятствием.

Чтобы его снять, модели надо поддерживать как состояние, так и параллелизм, что мы изучим на отдельном курсе.

# Реальный мир -- распределённый

Явное состояние трудно продуктивно использовать в распределенной системе, где хранилище данных часто разделено на отдельные части. В пределах одной части хранилище ведет себя эффективно, однако организация связи между его частями обходится уже на порядки дороже. Частям надо координироваться друг с другом для поддержания желаемого уровня глобальной согласованности. Это может быть дорогостоящим, поскольку содержимое ячеек может измениться в любое время и в любой части системы. Программисту нужно обеспечить как уровень согласованности, так и эффективный алгоритм координации, что существенно усложняет распределённое программирование с состояниями. Многие такие проблемы и технические способы их решения рассматриваются на курсах по highload-системам.

Основной подход -- разделение системы на независимые подсистемы, которые общаются друг с другом через обмен сообщениями. Он очень хорошо сочетается с разделенным хранилищем данных. При программировании распределенной системы рекомендуется всегда использовать модель передачи сообщений для координации работы её частей. Напомню, из изученных чуть ранее шести наиболее популярных протоколов для взаимодействия между компонентами, надо придерживаться как минимум четвёртой схемы ([асинхронность](https://vk.com/wall-152484379_3401)).

На следующем курсе рассмотрим, как на основе императивной модели реализуется парадигма объектно-ориентированного программирования -- добавлением всего одного нового понятия.

